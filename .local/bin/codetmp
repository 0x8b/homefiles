#!/bin/bash -x

# https://news.ycombinator.com/item?id=26083919

set -euo pipefail

readonly REPO="$1"
readonly TMPD="$(mktemp -d)"
git clone --depth 1 "$REPO" "$TMPD"
echo "$TMPD" > ~/.last-git-peek
export LAST_GIT_PEEK="$TMPD"
cd "$TMPD" # undo by `cd -`

# launch editor or ripgrep
