#!/bin/bash -x

# https://news.ycombinator.com/item?id=26083919

set -euo pipefail

REPO="$1"
readonly TMPD="$(mktemp -d)"

git clone --depth 1 "$REPO" "$TMPD"

echo "$TMPD" > ~/.last-git-peek

cd "$TMPD" # undo by `cd -`

export LAST_GIT_PEEK="$TMPD"

# launch editor or ripgrep
